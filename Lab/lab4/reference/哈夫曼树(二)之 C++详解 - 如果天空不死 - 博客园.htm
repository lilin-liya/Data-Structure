<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0050)http://www.cnblogs.com/skywang12345/p/3706821.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/analytics.js"></script>

<title>哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园</title>
<link type="text/css" rel="stylesheet" href="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/bundle-blue.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/skywang12345/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/skywang12345/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/skywang12345/wlwmanifest.xml">
<script type="text/javascript" src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/encoder.js"></script><script async="" type="text/javascript" src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/gpt.js"></script><script src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'skywang12345', cb_enable_mathjax=false;</script>
<script src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/blog-common.js" type="text/javascript"></script>
<script async="" type="text/javascript" src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/pubads_impl_54.js"></script><style id="style-1-cropbar-clipper">/* Copyright 2014 Evernote Corporation. All rights reserved. */
.en-markup-crop-options {
    top: 18px !important;
    left: 50% !important;
    margin-left: -100px !important;
    width: 200px !important;
    border: 2px rgba(255,255,255,.38) solid !important;
    border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
    margin-left: 0px !important;
}
</style><script type="text/javascript" src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/osd.js"></script></head>
<body>
<a name="top"></a>

<div class="pagelayout">
    
<div class="header">
	<div>
		<a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/skywang12345/">skywang12345</a>
	</div>
	<div>
		
	</div>
</div>
    <div id="leftmenu" class="leftcolumn">
        
            
<h1 class="listtitle">导航</h1>
<ul class="list">
			<li class="listitem"><a id="MyLinks1_HomeLink" class="listitem" href="http://www.cnblogs.com/">博客园</a></li>
			<li class="listitem"><a id="MyLinks1_MyHomeLink" href="http://www.cnblogs.com/skywang12345/">首页</a>
			</li><li class="listitem"><a id="MyLinks1_NewPostLink" rel="nofollow" href="http://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a>
			</li><li class="listitem"><a id="MyLinks1_ContactLink" accesskey="9" class="listitem" rel="nofollow" href="http://space.cnblogs.com/msg/send/%e5%a6%82%e6%9e%9c%e5%a4%a9%e7%a9%ba%e4%b8%8d%e6%ad%bb">联系</a></li>
			<li class="listitem"><a id="MyLinks1_Syndication" class="listitem" href="http://www.cnblogs.com/skywang12345/rss">订阅</a><a id="MyLinks1_XMLLink" href="http://www.cnblogs.com/skywang12345/rss"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/xml.gif" alt="订阅"></a>
			</li><li class="listitem"><a id="MyLinks1_Admin" class="listitem" rel="nofollow" href="http://i.cnblogs.com/">管理</a></li>
</ul>
            <div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="日历">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2014/10/01&#39;);return false;">&lt;</a></td><td align="center">2014年11月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2014/12/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">26</td><td class="CalOtherMonthDay" align="center">27</td><td class="CalOtherMonthDay" align="center">28</td><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td class="CalOtherMonthDay" align="center">31</td><td class="CalWeekendDay" align="center">1</td></tr><tr><td class="CalWeekendDay" align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td class="CalWeekendDay" align="center">8</td></tr><tr><td class="CalWeekendDay" align="center">9</td><td align="center">10</td><td align="center">11</td><td align="center">12</td><td align="center">13</td><td align="center">14</td><td class="CalWeekendDay" align="center">15</td></tr><tr><td class="CalWeekendDay" align="center">16</td><td align="center">17</td><td align="center">18</td><td align="center">19</td><td align="center">20</td><td align="center">21</td><td class="CalWeekendDay" align="center">22</td></tr><tr><td class="CalWeekendDay" align="center">23</td><td align="center">24</td><td align="center">25</td><td align="center">26</td><td align="center">27</td><td align="center">28</td><td class="CalTodayDay" align="center">29</td></tr><tr><td class="CalWeekendDay" align="center">30</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
            
<div class="listtitle">统计</div>
	<ul class="list">
		<li class="listitem">随笔 - 278
		</li><li class="listitem">文章 - 0
		</li><li class="listitem">评论 - 339
		</li><li class="listitem">引用 - 0
	</li>
</ul>
            
            <div id="blog-sidecolumn">
<div class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>

</div>


<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/skywang12345/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="http://www.cnblogs.com/skywang12345/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="http://www.cnblogs.com/skywang12345/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="http://www.cnblogs.com/skywang12345/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="http://www.cnblogs.com/skywang12345/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">

</div>
		<h1 class="listtitle">随笔分类<span style="font-size:11px;font-weight:normal">(275)</span></h1>
		
				<ul class="list">
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_0" class="listitem" href="http://www.cnblogs.com/skywang12345/category/493848.html">Android(7)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_1" class="listitem" href="http://www.cnblogs.com/skywang12345/category/482610.html">Android NDK编程(9)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_2" class="listitem" href="http://www.cnblogs.com/skywang12345/category/490118.html">Android 系统层(5)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_3" class="listitem" href="http://www.cnblogs.com/skywang12345/category/455318.html">Android 应用层(46)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_4" class="listitem" href="http://www.cnblogs.com/skywang12345/category/476579.html">Computer Culture(2)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_5" class="listitem" href="http://www.cnblogs.com/skywang12345/category/455711.html">Java(111)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_6" class="listitem" href="http://www.cnblogs.com/skywang12345/category/481789.html">Linux/Ubuntu(5)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_7" class="listitem" href="http://www.cnblogs.com/skywang12345/category/548620.html">UML(5)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_8" class="listitem" href="http://www.cnblogs.com/skywang12345/category/540303.html">Windows(1)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_9" class="listitem" href="http://www.cnblogs.com/skywang12345/category/548777.html">设计模式(1)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_10" class="listitem" href="http://www.cnblogs.com/skywang12345/category/508186.html">数据结构_算法(79)</a>  </li>
			
				<li class="listitem"><a id="CatList_LinkList_0_Link_11" class="listitem" href="http://www.cnblogs.com/skywang12345/category/489072.html">索引(4)</a>  </li>
			
				</ul>
			
	
<div id="recent_comments_wrap">
<h3 class="catListTitle">最新评论</h3>
<div class="RecentComment" id="RecentComments">
	<div id="RecentCommentsBlock"><ul>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/skywang12345/p/3479982.html#3073451">1. Re:Java多线程系列--“基础篇”10之 线程优先级和守护线程</a></li>
    <li class="recent_comment_body">博主的线程优先级和守护线程都没有解释清楚，起码优先级那块要多一些循环，这样读者才可以清晰的理解意思，守护进程那块根本就没有让读者理解守护进程的作用，本人之前对于博主的并发这块很感兴趣，但是后面好像没什么要读的欲望了........</li>
    <li class="recent_comment_author">--fly2749</li>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/skywang12345/p/3479224.html#3072668">2. Re:Java多线程系列--“基础篇”05之 线程等待与唤醒</a></li>
    <li class="recent_comment_body">朋友，确实，你的notify和wait说的很模糊，我试验了你的代码，感觉你说的这块有很大的歧义，尤其是第一个实例，那个notify可能根本没有起作用，似乎这里不应该这样用。</li>
    <li class="recent_comment_author">--fly2749</li>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/skywang12345/p/java_threads_category.html#3069259">3. Re:Java多线程系列目录(共43篇)</a></li>
    <li class="recent_comment_body">感谢，收藏了</li>
    <li class="recent_comment_author">--smh821025</li>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/skywang12345/p/3479949.html#3069083">4. Re:Java多线程系列--“基础篇”09之 interrupt()和线程终止方式</a></li>
    <li class="recent_comment_body">上面的代码还是有错误的地方，终止处于阻塞状态的（wait(),sleep()等）线程，捕获异常的代码在while循环内，就算break了，也不会终止当前线程，他只是跳出了while循环，而你的示例代码恰好又没有继续执行的代码，所以是线程是正常终止，而非调用interrupt()方法捕获异常终止的！</li>
    <li class="recent_comment_author">--John Hou</li>
    <li class="recent_comment_title"><a href="http://www.cnblogs.com/skywang12345/p/io_01.html#3068739">5. Re:java io系列01之 &amp;amp;quot;目录&amp;amp;quot;</a></li>
    <li class="recent_comment_body"><b>排版好，讲解详细清楚，专门登录顶一个</b></li>
    <li class="recent_comment_author">--明镜湖水</li>
</ul>
</div>
</div>
</div><div id="topview_posts_wrap">
<h3 class="catListTitle">阅读排行榜</h3>
<div class="RecentComment" id="TopViewPosts"> 
	<div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/skywang12345/p/3154150.html">1. Android 布局之GridLayout(8946)</a></li><li><a href="http://www.cnblogs.com/skywang12345/p/3158310.html">2. Android 之窗口小部件详解--App Widget(6720)</a></li><li><a href="http://www.cnblogs.com/skywang12345/archive/2013/06/15/AndroidAttr.html">3. Android layout属性详细说明(6019)</a></li><li><a href="http://www.cnblogs.com/skywang12345/p/3160260.html">4. Android App组件之ListFragment -- 说明和示例(5778)</a></li><li><a href="http://www.cnblogs.com/skywang12345/p/3323085.html">5. Java 集合系列目录(Category)(5735)</a></li></ul></div>
</div>
</div></div><script type="text/javascript">loadBlogSideColumn();</script>
        
        <div class="spacer">
            &nbsp;</div>
    </div>
    <div class="centercolumn">
        

<div class="singlepost">
	<div class="posttitle">
		<a id="cb_post_title_url" class="singleposttitle" href="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园.htm">哈夫曼树(二)之 C++详解</a>
	</div>
    <div class="postbody">
	<div id="cnblogs_post_body"><blockquote>
<p><span style="font-size: 16px; color: #000000;"><a href="http://www.cnblogs.com/skywang12345/p/3706370.html">上一章</a>介绍了哈夫曼树的基本概念，并通过C语言实现了哈夫曼树。本章是哈夫曼树的C++实现。</span></p>
<p><span style="font-size: 16px; color: #000000;"><strong>目录</strong> <br>
<strong>1</strong>. <a href="http://www.cnblogs.com/skywang12345/p/3706821.html#anchor1">哈夫曼树的介绍</a> <br>
<strong>2</strong>. <a href="http://www.cnblogs.com/skywang12345/p/3706821.html#anchor2">哈夫曼树的图文解析</a> <br>
<strong>3</strong>. <a href="http://www.cnblogs.com/skywang12345/p/3706821.html#anchor3">哈夫曼树的基本操作</a> <br>
<strong>4</strong>. <a href="http://www.cnblogs.com/skywang12345/p/3706821.html#anchor4">哈夫曼树的完整源码</a>  </span></p>
<p><span style="font-size: 16px; color: #000000;">转载请注明出处：<a href="http://www.cnblogs.com/skywang12345/">http://www.cnblogs.com/skywang12345/</a></span></p>
<p><span style="font-size: 16px; color: #000000;">更多内容：<a href="http://www.cnblogs.com/skywang12345/p/3603935.html">数据结构与算法系列 目录</a></span></p>


 
</blockquote>
<p><span style="font-size: 16px; color: #000000;"><a name="anchor1"></a></span></p>
<h3><strong><span style="font-family: 黑体; font-size: 18pt; line-height: 1.5; color: #000000;">哈夫曼树的介绍</span></strong></h3>
<p><span style="font-size: 16px; color: #000000;">Huffman Tree，中文名是哈夫曼树或霍夫曼树，它是最优二叉树。</span></p>
<p><span style="font-size: 16px; color: #000000;"><strong>定义</strong>：给定n个权值作为n个叶子结点，构造一棵二叉树，若树的带权路径长度达到最小，则这棵树被称为哈夫曼树。
这个定义里面涉及到了几个陌生的概念，下面就是一颗哈夫曼树，我们来看图解答。</span></p>
<p><span style="font-size: 16px; color: #000000;"><a href="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/01.jpg"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/01.jpg" alt=""></a></span></p>
<p><span style="font-size: 16px; color: #000000;">(01) 路径和路径长度</span></p>
<blockquote>
<p><span style="font-size: 16px; color: #000000;"><strong>定义</strong>：在一棵树中，从一个结点往下可以达到的孩子或孙子结点之间的通路，称为路径。通路中分支的数目称为路径长度。若规定根结点的层数为1，则从根结点到第L层结点的路径长度为L-1。 <br>
<strong>例子</strong>：100和80的路径长度是1，50和30的路径长度是2，20和10的路径长度是3。</span></p>



</blockquote>
<p><span style="font-size: 16px; color: #000000;">(02) 结点的权及带权路径长度</span></p>
<blockquote>
<p><span style="font-size: 16px; color: #000000;"><strong>定义</strong>：若将树中结点赋给一个有着某种含义的数值，则这个数值称为该结点的权。结点的带权路径长度为：从根结点到该结点之间的路径长度与该结点的权的乘积。 <br>
<strong>例子</strong>：节点20的路径长度是3，它的带权路径长度= 路径长度 * 权 = 3 * 20 = 60。</span></p>



</blockquote>
<p><span style="font-size: 16px; color: #000000;">(03) 树的带权路径长度</span></p>
<blockquote>
<p><span style="font-size: 16px; color: #000000;"><strong>定义</strong>：树的带权路径长度规定为所有叶子结点的带权路径长度之和，记为WPL。 <br>
<strong>例子</strong>：示例中，树的WPL= 1*<em>100 + 2*</em>80 + 3*<em>20 + 3*</em>10 = 100 + 160 + 60 + 30 = 350。</span></p>



</blockquote>
<p><span style="font-size: 16px; color: #000000;"><br>
比较下面两棵树</span></p>
<p><span style="font-size: 16px; color: #000000;"><a href="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/02.jpg"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/02.jpg" alt=""></a></span></p>
<p><span style="font-size: 16px; color: #000000;">上面的两棵树都是以{10, 20, 50, 100}为叶子节点的树。</span></p>
<blockquote>
<p><span style="font-size: 16px; color: #000000;">左边的树WPL=2*10 + 2*20 + 2*50 + 2*100 = 360 <br>
右边的树WPL=350</span></p>



</blockquote>
<p><span style="font-size: 16px; color: #000000;">左边的树WPL &gt; 右边的树的WPL。你也可以计算除上面两种示例之外的情况，但实际上右边的树就是{10,20,50,100}对应的哈夫曼树。至此，应该堆哈夫曼树的概念有了一定的了解了，下面看看如何去构造一棵哈夫曼树。</span></p>
<p><span style="font-size: 16px; color: #000000;"><a name="anchor2"></a></span></p>
<h3><strong><span style="font-family: 黑体; font-size: 18pt; line-height: 1.5; color: #000000;">哈夫曼树的图文解析</span></strong></h3>
<p><span style="font-size: 16px; color: #000000;">假设有n个权值，则构造出的哈夫曼树有n个叶子结点。 n个权值分别设为 w<sub>1</sub>、w<sub>2</sub>、…、w<sub>n</sub>，哈夫曼树的构造规则为：  </span></p>
<blockquote>
<p><span style="font-size: 16px; color: #000000;"><strong>1</strong>. 将w<sub>1</sub>、w<sub>2</sub>、…，w<sub>n</sub>看成是有n 棵树的森林(每棵树仅有一个结点)； <br>
<strong>2</strong>. 在森林中选出根结点的权值最小的两棵树进行合并，作为一棵新树的左、右子树，且新树的根结点权值为其左、右子树根结点权值之和； <br>
<strong>3</strong>. 从森林中删除选取的两棵树，并将新树加入森林； <br>
<strong>4</strong>. 重复(02)、(03)步，直到森林中只剩一棵树为止，该树即为所求得的哈夫曼树。  </span></p>



</blockquote>
<p><span style="font-size: 16px; color: #000000;"><br>
以{5,6,7,8,15}为例，来构造一棵哈夫曼树。</span></p>
<p><span style="font-size: 16px; color: #000000;"><a href="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/03.jpg"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/03.jpg" alt=""></a></span></p>
<p><span style="font-size: 16px; color: #000000;"><strong>第1步</strong>：创建森林，森林包括5棵树，这5棵树的权值分别是5,6,7,8,15。 <br>
<strong>第2步</strong>：在森林中，选择根节点权值最小的两棵树(5和6)来进行合并，将它们作为一颗新树的左右孩子(谁左谁右无关紧要，这里，我们选择较小的作为左孩子)，并且新树的权值是左右孩子的权值之和。即，新树的权值是11。 然后，将"树5"和"树6"从森林中删除，并将新的树(树11)添加到森林中。 <br>
<strong>第3步</strong>：在森林中，选择根节点权值最小的两棵树(7和8)来进行合并。得到的新树的权值是15。  然后，将"树7"和"树8"从森林中删除，并将新的树(树15)添加到森林中。 <br>
<strong>第4步</strong>：在森林中，选择根节点权值最小的两棵树(11和15)来进行合并。得到的新树的权值是26。  然后，将"树11"和"树15"从森林中删除，并将新的树(树26)添加到森林中。 <br>
<strong>第5步</strong>：在森林中，选择根节点权值最小的两棵树(15和26)来进行合并。得到的新树的权值是41。 然后，将"树15"和"树26"从森林中删除，并将新的树(树41)添加到森林中。 <br>
此时，森林中只有一棵树(树41)。这棵树就是我们需要的哈夫曼树！  </span></p>
<p><span style="font-size: 16px; color: #000000;"><a name="anchor3"></a></span></p>
<h3><strong><span style="font-family: 黑体; font-size: 18pt; line-height: 1.5; color: #000000;">哈夫曼树的基本操作</span></strong></h3>
<p><span style="font-size: 16px; color: #000000;">哈夫曼树的重点是如何构造哈夫曼树。本文构造哈夫曼时，用到了以前介绍过的"(二叉堆)最小堆"。下面对哈夫曼树进行讲解。</span></p>
<p><strong><span style="font-size: 18pt; color: #000000;">1. 基本定义</span></strong></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><code>template &lt;class T&gt;
class HuffmanNode{
    public:
        T key;              // 权值
        HuffmanNode *left;  // 左孩子
        HuffmanNode *right; // 右孩子
        HuffmanNode *parent;// 父结点


        HuffmanNode(){}
        HuffmanNode(T value, HuffmanNode *l, HuffmanNode *r, HuffmanNode *p):
            key(value),left(l),right(r),parent(p) {}
};
</code></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p><span style="font-size: 16px; color: #000000;">HuffmanNode是哈夫曼树的节点类。</span></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><code>template &lt;class T&gt;
class Huffman {
    private:
        HuffmanNode&lt;T&gt; *mRoot;  // 根结点

    public:
        Huffman();
        ~Huffman();

        // 前序遍历"Huffman树"
        void preOrder();
        // 中序遍历"Huffman树"
        void inOrder();
        // 后序遍历"Huffman树"
        void postOrder();

        // 创建Huffman树
        void create(T a[], int size);
        // 销毁Huffman树
        void destroy();

        // 打印Huffman树
        void print();
    private:
        // 前序遍历"Huffman树"
        void preOrder(HuffmanNode&lt;T&gt;* tree) const;
        // 中序遍历"Huffman树"
        void inOrder(HuffmanNode&lt;T&gt;* tree) const;
        // 后序遍历"Huffman树"
        void postOrder(HuffmanNode&lt;T&gt;* tree) const;

        // 销毁Huffman树
        void destroy(HuffmanNode&lt;T&gt;* &amp;tree);

        // 打印Huffman树
        void print(HuffmanNode&lt;T&gt;* tree, T key, int direction);
};
</code></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p><span style="font-size: 16px; color: #000000;">Huffman是哈夫曼树对应的类，它包含了哈夫曼树的根节点和哈夫曼树的相关操作。</span></p>
<p><strong><span style="font-size: 18pt; color: #000000;">2. 构造哈夫曼树</span></strong></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><code>/* 
 * 创建Huffman树
 *
 * 参数说明：
 *     a 权值数组
 *     size 数组大小
 *
 * 返回值：
 *     Huffman树的根节点
 */
template &lt;class T&gt;
void Huffman&lt;T&gt;::create(T a[], int size)
{
    int i;
    HuffmanNode&lt;T&gt; *left, *right, *parent;
    MinHeap&lt;T&gt; *heap = new MinHeap&lt;T&gt;();

    // 建立数组a对应的最小堆
    heap-&gt;create(a, size);

    for(i=0; i&lt;size-1; i++)
    {   
        left = heap-&gt;dumpFromMinimum();  // 最小节点是左孩子
        right = heap-&gt;dumpFromMinimum(); // 其次才是右孩子

        // 新建parent节点，左右孩子分别是left/right；
        // parent的大小是左右孩子之和
        parent = new HuffmanNode&lt;T&gt;(left-&gt;key+right-&gt;key, left, right, NULL);
        left-&gt;parent = parent;
        right-&gt;parent = parent;


        // 将parent节点数据拷贝到"最小堆"中
        if (heap-&gt;copyOf(parent)!=0)
        {
            cout &lt;&lt; "插入失败!" &lt;&lt; endl &lt;&lt; "结束程序" &lt;&lt; endl;
            destroy(parent);
            parent = NULL;
            break;
        }
    }

    mRoot = parent;

    // 销毁最小堆
    heap-&gt;destroy();
    delete heap;
}
</code></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p><span style="font-size: 16px; color: #000000;">首先通过heap-&gt;create(a, size)来创建最小堆。最小堆构造完成之后，进入for循环。</span></p>
<p><span style="font-size: 16px; color: #000000;">每次循环时：</span></p>
<blockquote>
<p><span style="font-size: 16px; color: #000000;">(01) 首先，将最小堆中的最小节点拷贝一份并赋值给left，然后重塑最小堆(将最小节点和后面的节点交换位置，接着将"交换位置后的最小节点"之前的全部元素重新构造成最小堆)； <br>
(02) 接着，再将最小堆中的最小节点拷贝一份并将其赋值right，然后再次重塑最小堆； <br>
(03) 然后，新建节点parent，并将它作为left和right的父节点； <br>
(04) 接着，将parent的数据复制给最小堆中的指定节点。  </span></p>



</blockquote>
<p><span style="font-size: 16px; color: #000000;">在<a href="http://www.cnblogs.com/skywang12345/p/3610382.html">二叉堆</a>中已经介绍过堆，这里就不再对堆的代码进行说明了。若有疑问，直接参考后文的源码。其它的相关代码，也Please RTFSC(Read The Fucking Source Code)！</span></p>
<p><span style="font-size: 16px; color: #000000;"><a name="anchor4"></a></span></p>
<h3><strong><span style="font-family: 黑体; font-size: 18pt; line-height: 1.5; color: #000000;">哈夫曼树的完整源码</span></strong></h3>
<p><span style="font-size: 16px; color: #000000;">哈夫曼树的源码共包括4个文件。</span></p>
<p><span style="font-size: 16px; color: #000000;"><strong>1</strong>. <a href="https://github.com/wangkuiwu/datastructs_and_algorithm/blob/master/source/tree/huffman/cplus/HuffmanNode.h">哈夫曼树的节点类(HuffmanNode.h)</a></span></p>
<p><span style="font-size: 16px; color: #000000;"><strong>2</strong>. <a href="https://github.com/wangkuiwu/datastructs_and_algorithm/blob/master/source/tree/huffman/cplus/Huffman.h">哈夫曼树的实现文件(Huffman.h)</a></span></p>
<p><span style="font-size: 16px; color: #000000;"><strong>3</strong>. <a href="https://github.com/wangkuiwu/datastructs_and_algorithm/blob/master/source/tree/huffman/cplus/MinHeap.h">哈夫曼树对应的最小堆(MinHeap.h)</a></span></p>
<p><span style="font-size: 16px; color: #000000;"><strong>4</strong>. <a href="https://github.com/wangkuiwu/datastructs_and_algorithm/blob/master/source/tree/huffman/cplus/HuffmanTest.cpp">哈夫曼树的测试程序(HuffmanTest.cpp)</a></span></p></div><div id="MySignature" style="display: block;"><table><tbody><tr><td><img style="width: 80px; height:80px;" src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/t_f1.jpg" alt="img"></td><td style="FONT-WEIGHT: normal; FONT-SIZE: 14pt; LINE-HEIGHT: 100%; FONT-STYLE: normal; FONT-VARIANT: normal; color:#FF0000"><font style="LINE-HEIGHT: 250%; FONT-SIZE:14pt; color:#610B21">生活的悲欢离合永远在地平线以外，而眺望是一种青春的姿态...</font><br>PS.文章是笔者分享的学习笔记，若你觉得可以、还行、过得去、甚至不太差的话，可以“推荐”一下的哦。就此谢过!</td></tr></tbody></table></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="http://www.cnblogs.com/skywang12345/category/508186.html">数据结构_算法</a></div>
<div id="EntryTag"></div>
<div id="blog_post_info"><div id="green_channel">
绿色通道：
<a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(3706821,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
<a id="green_channel_follow" onclick="c_follow();" href="javascript:void(0);">关注我</a>
<a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a><a id="green_channel_contact" href="http://space.cnblogs.com/msg/send/%e5%a6%82%e6%9e%9c%e5%a4%a9%e7%a9%ba%e4%b8%8d%e6%ad%bb" target="_blank">与我联系</a>
<a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/icon_weibo_24.png" alt=""></a>
</div>
<div id="author_profile">
<div id="author_profile_info" class="author_profile_info">
<a href="http://home.cnblogs.com/u/skywang12345/" target="_blank"><img src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/20131015182802.png" class="author_avatar" alt=""></a>
<div id="author_profile_detail" class="author_profile_info">
<a href="http://home.cnblogs.com/u/skywang12345/">如果天空不死</a><br>
<a href="http://home.cnblogs.com/u/skywang12345/followees">关注 - 9</a><br>
<a href="http://home.cnblogs.com/u/skywang12345/followers">粉丝 - 373</a>
</div>
</div>
<div class="clear"></div>
<div id="author_profile_honor"></div>
<div id="author_profile_follow">
    <a href="javascript:void(0);" onclick="c_follow();return false;">+加关注</a>
</div>
</div>
<div id="div_digg">										
    <div class="diggit" onclick="votePost(3706821,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">1</span>
    </div>
	<div class="buryit" onclick="votePost(3706821,&#39;Bury&#39;)"> 
		<span class="burynum" id="bury_count">0</span>
	</div>
	<div class="clear"></div>	
	<div class="diggword" id="digg_tips">
    (请您对文章做出评价)
    </div>	
</div>
</div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/skywang12345/p/3706370.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/skywang12345/p/3706370.html" title="发布于2014-05-04 12:04">哈夫曼树(一)之 C语言详解</a><br><a href="http://www.cnblogs.com/skywang12345/p/3706833.html" class="p_n_p_prefix">» </a> 下一篇：<a href="http://www.cnblogs.com/skywang12345/p/3706833.html" title="发布于2014-05-05 09:16">哈夫曼树(三)之 Java详解</a><br></div>
</div>


    </div>
	<div class="itemdesc">
		posted on <span id="post-date">2014-05-04 18:37</span> <a href="http://www.cnblogs.com/skywang12345/">如果天空不死</a> 阅读(<span id="post_view_count">491</span>) 评论(<span id="post_comment_count">2</span>)  <a href="http://i.cnblogs.com/EditPosts.aspx?postid=3706821" rel="nofollow">编辑</a> <a href="http://www.cnblogs.com/skywang12345/p/3706821.html#" onclick="AddToWz(3706821);return false;">收藏</a>
	</div>
</div>
	<script type="text/javascript">var allowComments=true,isLogined=false,cb_blogId=142383,cb_entryId=3706821,cb_blogApp=currentBlogApp,cb_blogUserGuid='529b107b-d87b-e211-aa8f-842b2b196315',cb_entryCreatedDate='2014/5/4 18:37:00';loadViewCount(cb_entryId);</script>
	
<a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<a name="评论"></a>
<div class="moreinfo">
	<div class="moreinfotitle">
		Comments
	</div>
		
	
			<ul class="morelist">
		
			<li class="morelistitem">
				<div class="moreinfotitle">
					<a href="http://www.cnblogs.com/skywang12345/p/3706821.html#2942502" class="layer">#1楼</a><a name="2942502" id="comment_anchor_2942502"></a>
				</div>
				<a id="a_comment_author_2942502" href="http://home.cnblogs.com/u/635391/" target="_blank">名草震江湖</a> <a href="http://msg.cnblogs.com/msg/send/%e5%90%8d%e8%8d%89%e9%9c%87%e6%b1%9f%e6%b9%96" title="发送站内短消息" class="sendMsg2This">&nbsp;</a><br>
				Posted @  <span class="comment_date">2014-05-20 12:14</span><br>
				<div id="comment_body_2942502" class="blog_comment_body">右边的树WPL算错了，应该是290</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(2942502,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(2942502,&#39;Bury&#39;,this)">反对(0)</a></div>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			</li>
		
			<li class="morelistitem">
				<div class="moreinfotitle">
					<a href="http://www.cnblogs.com/skywang12345/p/3706821.html#2964795" class="layer">#2楼</a><a name="2964795" id="comment_anchor_2964795"></a><span id="comment-maxId" style="display:none;">2964795</span><span id="comment-maxDate" style="display:none;">2014/6/16 10:09:32</span>
				</div>
				<a id="a_comment_author_2964795" href="http://home.cnblogs.com/u/640798/" target="_blank">M程序员</a> <a href="http://msg.cnblogs.com/msg/send/M%e7%a8%8b%e5%ba%8f%e5%91%98" title="发送站内短消息" class="sendMsg2This">&nbsp;</a><br>
				Posted @  <span class="comment_date">2014-06-16 10:09</span><br>
				<div id="comment_body_2964795" class="blog_comment_body">(03)的那棵树的WPL算错了，WPL= 1*100 + 2*50 + 3*20 + 3*10 = 100 + 100 + 60 + 30 = 290</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(2964795,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(2964795,&#39;Bury&#39;,this)">反对(0)</a></div>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			</li>
		
			</ul>
		
</div>


<div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();">刷新评论</a><a href="http://www.cnblogs.com/skywang12345/p/3706821.html#" onclick="return RefreshPage();">刷新页面</a><a href="http://www.cnblogs.com/skywang12345/p/3706821.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="site_nav_under"><a href="http://www.imooc.com/view/41?from=cnblogs" target="_blank"><b>【免费课程】分享：响应式布局</b></a><br><a href="http://www.ucancode.com/index.htm" target="_blank">【推荐】50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="http://www.rongcloud.cn/promotion" target="_blank">融云，免费为你的App加入IM功能——让你的App“聊”起来！！</a><br><a href="http://www.cnblogs.com/cmt/p/tingyun.html" target="_blank">写“听云”原创博文，赢取iPhone 6超级大奖</a></div>
<div id="opt_under_post"></div>
<script type="text/javascript">
    var enableGoogleAd = canShowAdsense(); var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];
    fixPostBodyFormat();
</script>
<div id="ad_under_post_holder">
<script type="text/javascript">
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function () {
        if (enableGoogleAd) {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        }
    })();
</script>
<script type="text/javascript">
    try {
        if (enableGoogleAd) {
            googletag.cmd.push(function () {
                googletag.defineSlot('/1090369/cnblogs_blogpost_C1_sitehome', [300, 250], 'div-gpt-ad-1346480159711-0').addService(googletag.pubads());
                googletag.defineSlot('/1090369/cnblogs_blogpost_C2', [468, 60], 'div-gpt-ad-1410860226396-0').addService(googletag.pubads());
                googletag.pubads().enableSingleRequest();
                googletag.enableServices();
            });
        };
    } catch (e) { }
</script>
<div id="google_ad_c1" class="c_ad_block">
    <div id="div-gpt-ad-1346480159711-0" style="width:300px; height:250px;">
    <script type="text/javascript">
        try {
            if (enableGoogleAd) {
                googletag.cmd.push(function () { googletag.display('div-gpt-ad-1346480159711-0'); });            
            } else {
                $('#div-gpt-ad-1346480159711-0').hide();
            }
    } catch (e) { }
    </script>
    <div id="google_ads_iframe_/1090369/cnblogs_blogpost_C1_sitehome_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/cnblogs_blogpost_C1_sitehome_0" name="google_ads_iframe_/1090369/cnblogs_blogpost_C1_sitehome_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div><iframe id="google_ads_iframe_/1090369/cnblogs_blogpost_C1_sitehome_0__hidden__" name="google_ads_iframe_/1090369/cnblogs_blogpost_C1_sitehome_0__hidden__" width="0" height="0" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom; visibility: hidden; display: none;"></iframe></div>
</div>
</div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="http://news.cnblogs.com/n/509743/" target="_blank">天使眼中的余佳文：为他的独有气质打动</a><br> ·  <a href="http://news.cnblogs.com/n/509742/" target="_blank">Facebook公布美国各州感恩图</a><br> ·  <a href="http://news.cnblogs.com/n/509741/" target="_blank">看看你去苹果的话，能挣多少钱？</a><br> ·  <a href="http://news.cnblogs.com/n/509740/" target="_blank">Facebook将过滤免费广告 小企业很受伤</a><br> ·  <a href="http://news.cnblogs.com/n/509739/" target="_blank">索尼悄然建造电子纸智能手表 可随姿势改变外观</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="google_ad_c2" class="c_ad_block">
<div id="div-gpt-ad-1410860226396-0" style="width:468px; height:60px;">
<script type="text/javascript">
try {
    if (enableGoogleAd) {
        googletag.cmd.push(function () { googletag.display('div-gpt-ad-1410860226396-0'); });
    } else {
        $('#div-gpt-ad-1346480159711-0').hide();
    }
} catch (e) { }
</script>
<div id="google_ads_iframe_/1090369/cnblogs_blogpost_C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/cnblogs_blogpost_C2_0" name="google_ads_iframe_/1090369/cnblogs_blogpost_C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" src="javascript:"<html><body style='background:transparent'></body></html>"" style="border: 0px; vertical-align: bottom;"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/509630/" target="_blank">Couchbase：更好的Cache系统</a><br> ·  <a href="http://kb.cnblogs.com/page/509527/" target="_blank">缓存是新的内存</a><br> ·  <a href="http://kb.cnblogs.com/page/509402/" target="_blank">亿级Web系统搭建——单机到分布式集群</a><br> ·  <a href="http://kb.cnblogs.com/page/508478/" target="_blank">SOA与API的分裂和统一</a><br> ·  <a href="http://kb.cnblogs.com/page/509278/" target="_blank">可测性分析和实践</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
$(function () {
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    setTimeout(function () { incrementViewCount(cb_entryId); }, 200);
});
</script><iframe src="./哈夫曼树(二)之 C++详解 - 如果天空不死 - 博客园_files/container.htm" style="visibility: hidden; display: none;"></iframe>
</div>

        <div class="spacer">
            &nbsp;</div>
    </div>
    
<div class="footer">
	Powered by: 
	<br>
	
	<a id="Footer1_Hyperlink3" name="Hyperlink1" href="http://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br>
	Copyright © 如果天空不死
</div>
</div>



<iframe id="google_osd_static_frame_3401668001897" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body></html>